<!DOCTYPE html>
<html lang="ch">
{% load my_tag my_filter %}
<head>
    <meta charset="UTF-8">
    <title>枫枫知道个人博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" sizes="any" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/my/css/reset.css">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="/static/elementui/theme-chalk/index.css">

    <link rel="stylesheet" href="/static/fontawesome-free-5/css/all.min.css">
    <link rel="stylesheet" href="/static/my/css/base.css">
    {% block css %}
        <link rel="stylesheet" href="/static/my/css/index.css">
    {% endblock %}
    <link rel="stylesheet" href="/static/my/css/match/notebook.css">
    <link rel="stylesheet" href="/static/my/css/match/phone.css">

</head>
<body>
<div id="app">
    <link rel="stylesheet" :href="'/static/my/css/theme/' + theme + '.css'">
    <el-scrollbar ref="scrollbar" style="height: 100vh">
        <el-drawer
                style="display: none"
                custom-class="nav_drawer_class"
                title="我是标题"
                :modal="false"
                :with-header="false"
                size="40%"
                @close="nav_close"
                @open="nav_open"
                :visible.sync="nav_drawer"
                direction="ltr">
            <div class="nav_content">
                <div class="title">
                    <img src="/static/my/img/nav/avatar.jpeg" alt="">
                    <h2>枫枫知道个人博客</h2>
                </div>
                <div class="content">
                    {% dynamic_navigation request %}
                </div>
            </div>
        </el-drawer>
        <nav class="nav_bg">
            <div class="left" id="dynamic_nav">
                {% dynamic_navigation request %}
                <a @click="nav_drawer=true" class="nav_slide" href="javascript:void(0);"><i class="fa fa-align-justify"></i></a>
                {% block search %}
                    <div class="search">
                        <input type="text" @keydown.enter="search()" v-model="search_key" class="search_box"
                               placeholder="搜索你想要的内容">
                        <button @click="search()"><i class="fa fa-search"></i></button>
                    </div>
                {% endblock %}


            </div>
            <div class="right">
                <img v-show="theme === 'light'" src="/static/my/img/nav/light.svg" @click="setTheme('dark')" alt="">
                <img v-show="theme === 'dark'" src="/static/my/img/nav/dark.svg" @click="setTheme('light')" alt="">

                {% if request.user.is_authenticated %}
                    <img src="{{ request.user|get_avatar }}" style="border-radius: 50%" class="avatar" alt="">
                    <el-dropdown>
                  <span class="el-dropdown-link">
                    {{ request.user.nick_name }}<i class="el-icon-arrow-down el-icon--right"></i>
                  </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item><a href="/backend/">个人中心</a></el-dropdown-item>
                            <el-dropdown-item><a href="/backend/edit_avatar/">修改头像</a></el-dropdown-item>
                            {% if request.user.is_superuser %}
                                <el-dropdown-item><a href="/backend/add_article/">发布文章</a></el-dropdown-item>
                                <el-dropdown-item><a href="/admin/">后台管理</a></el-dropdown-item>
                            {% endif %}
                            <el-dropdown-item><a href="/logout/">注销退出</a></el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                {% else %}
                    <a href="/login">登录</a>
                    <a href="/sign">注册</a>
                {% endif %}
            </div>
        </nav>
        {% block banner %}
            {% banner 'index' %}
        {% endblock %}
        <main>
            {% csrf_token %}
            {% block main %}
                <div class="main">
                    <div class="left">
                        <div class="boutique_article card">
                            <div class="title">
                                <h2>精选文章</h2>
                                <div class="switch_article_category">
                                <span :active="this_category === 'qianduan'"
                                      @click="switch_article_category('qianduan')">前端</span>
                                    <span :active="this_category === 'houduan'"
                                          @click="switch_article_category('houduan')">后端</span>
                                </div>
                            </div>
                            <div class="body">
                                <ul v-show="this_category === 'qianduan'" class="qianduan">
                                    {% for frontend in frontend_list %}
                                        <li>
                                            <div class="left">
                                                <div>
                                                    <img src="{{ frontend.cover.url.url }}" alt="">
                                                </div>
                                            </div>
                                            <div class="right">
                                                <h2><a href="/article/{{ frontend.nid }}/">{{ frontend.title }}</a></h2>
                                                <p>{{ frontend.abstract }}</p>
                                                <span>{{ frontend.create_date|date_humaniz }}</span>
                                            </div>
                                        </li>
                                    {% endfor %}


                                </ul>
                                <ul v-show="this_category === 'houduan'" class="hou">
                                    {% for frontend in backend_list %}
                                        <li>
                                            <div class="left">
                                                <div>
                                                    <img src="{{ frontend.cover.url.url }}" alt="">
                                                </div>
                                            </div>
                                            <div class="right">
                                                <h2><a href="/article/{{ frontend.nid }}/">{{ frontend.title }}</a></h2>
                                                <p>{{ frontend.abstract }}</p>
                                                <span>{{ frontend.create_date|date_humaniz }}</span>
                                            </div>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        <div class="hotList card">
                            <div id="con">

                            </div>
                            <div class="title">
                                <h2 id="pos">今日热搜</h2>
                                <div>
                                    <a href="/news/">查看更多</a>
                                </div>
                            </div>
                            <div class="body">
                                <div v-for="item in news_list" :key="item.index">
                                    <span class="index">[[ item.index ]]</span> <a
                                        :href="item.link"
                                        target="_blank">[[ item.title ]]</a>
                                    <span class="num">[[ item.hotValue ]]</span>
                                </div>
                            </div>
                        </div>
                        <div class="all_article card">
                            <div class="title">
                                <h2>博客文章</h2>
                            </div>
                            <div class="body">
                                {% if request.user.is_superuser %}
                                    <el-dialog
                                            title="修改文章封面"
                                            :visible.sync="edit_cover_dialog"
                                            width="20%">
                                        <div class="dialog_content">
                                            <div>
                                                <label for="">文章封面</label>
                                                <el-select v-model="edit_cover.nid"
                                                           placeholder="请选择文章封面">
                                                    {% for cover in cover_list %}
                                                        <el-option
                                                                label="{{ cover.url.url }}"
                                                                value="{{ cover.nid }}">
                                                            <img src="{{ cover.url.url }}"
                                                                 alt="">
                                                        </el-option>
                                                    {% endfor %}
                                                </el-select>
                                            </div>
                                        </div>
                                        <span slot="footer" class="dialog-footer">
                                            <el-button @click="edit_cover_dialog = false">取 消</el-button>
                                            <el-button type="primary"
                                                       @click="edit_cover_method(edit_cover.aid)">确 定</el-button>
                                          </span>
                                    </el-dialog>
                                {% endif %}
                                <ul class="article_content">
                                    {% for article in article_list %}
                                        <li>
                                            {% if article.category %}
                                                <div class="category_flag"
                                                     len="{{ article.get_category_display|length }}"
                                                     type="{{ article.get_category_display }}">
                                                    {{ article.get_category_display }}
                                                </div>
                                            {% endif %}

                                            <div class="left">
                                                <div>
                                                    <el-image
                                                            scroll-container=".el-scrollbar__wrap"
                                                            @contextmenu.ctrl.prevent="show_edit_cover('{{ article.nid }}', '{{ article.cover.nid }}')"
                                                            src="{{ article.cover.url.url }}" lazy alt="">
                                                        <div slot="placeholder" class="image-slot">
                                                            <i class="el-icon-picture-outline"></i>
                                                        </div>
                                                        <div slot="error" class="image-slot">
                                                            <i class="el-icon-picture-outline"></i>
                                                        </div>
                                                    </el-image>

                                                </div>

                                            </div>
                                            <div class="right">
                                                <h2><a href="/article/{{ article.nid }}/">{{ article.title }}</a></h2>
                                                <p>{{ article.abstract }}</p>
                                                <div class="article_info">
                                                    <span>
                                                <i class="far fa-clock"></i>{{ article.create_date|date:'Y-m-d' }}
                                            </span>
                                                    <span>
                                                <i class="fas fa-thumbs-up"></i>{{ article.digg_count }}
                                            </span>
                                                    <span>
                                                <i class="far fa-eye"></i>{{ article.look_count }}
                                            </span>
                                                    <span class="netbook phone_550">
                                                <i class="fas fa-comments"></i>{{ article.comment_count }}
                                            </span>
                                                    <span class="netbook phone_550">
                                                        <i class="fas fa-star-half-alt {{ article|is_user_collects:request }}"></i>{{ article.collects_count }}
                                                    </span>
                                                    {% if article.pwd %}
                                                        <span class="netbook phone_550">
                                                            <i class="fa fa-lock"></i>
                                                        </span>
                                                    {% endif %}

                                                </div>
                                            </div>
                                        </li>
                                    {% endfor %}
                                </ul>
                                <ul class="pager">
                                    {{ pager.page_html|safe }}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="right">
                        {% if advert_list.count %}
                            <div class="advertisement card">
                                <div class="title">
                                    <h2>独家广告</h2>
                                    <div>
                                        <a href="#">申请</a>
                                    </div>
                                </div>
                                <div class="body">
                                    <el-carousel :interval="5000" trigger="click" class="adv_img_list" height="200px">
                                        {% for advert in advert_list|generate_advert %}
                                            <el-carousel-item>
                                                <a title="{{ advert.title }}" href="{{ advert.href }}" target="_blank">
                                                    <img src="{{ advert.url }}" alt="">
                                                </a>
                                            </el-carousel-item>
                                        {% endfor %}

                                    </el-carousel>

                                </div>
                            </div>
                        {% endif %}
                        <div class="my_card">
                            <div class="title">
                                <h3>个人名片</h3>
                                <h4>MY</h4>
                                <h4>PROFILE</h4>
                                <img src="/static/my/img/footer/wechat.png" alt="我的微信">
                            </div>
                            <div class="jieqi">
                                <img id="jieqiset" src="/static/my/img/24_hourse/0.png" alt="24节气">
                            </div>
                            <div class="footer">
                                <p>NAME <span>枫枫知道</span></p>
                                <p>JOB <span>全栈开发</span></p>
                                <p>ADDR <span>湖南长沙</span></p>
                                <p>WEB <a target="_blank"
                                          href="http://www.fengfengzhidao.com">www.fengfengzhidao.com</a>
                                </p>
                            </div>

                        </div>
                        <div class="tags card">
                            <div class="title">
                                <h2>标签云</h2>
                            </div>
                            <div class="body">
                                <ul>
                                    {% generate_tag_html %}
                                </ul>
                            </div>
                        </div>
                        <div class="site_info card">
                            <div class="title">
                                <h2>站点信息</h2>
                            </div>
                            <div class="body">
                                <div class="item"><b>建站时间:</b> <span>2021年12月29日</span></div>
                                <div class="item"><b>网站程序:</b> <span>Django+Vue.js</span></div>
                                <div class="item"><b>在线人数:</b> <span>{{ online_count }}</span></div>
                                <div class="item"><b>前端文章:</b> <span>{% calculation_category_count 1 %}</span></div>
                                <div class="item"><b>后端文章:</b> <span>{% calculation_category_count 2 %}</span></div>
                                <div class="item"><b>项目相关:</b> <span>{% calculation_category_count 3 %}</span></div>
                                <div class="item"><b>网站空间:</b> <span>腾讯云服务器</span></div>
                                <div class="item"><b>订阅内容:</b>
                                    <div class="images">
                                        <div class="qq">
                                            <el-image
                                                    :preview-src-list="['/static/my/img/footer/qq.png', '/static/my/img/footer/wechat.png']"
                                                    scroll-container=".el-scrollbar__wrap" lazy
                                                    src="/static/my/img/footer/qq.png" alt="我的QQ"></el-image>
                                            我的QQ
                                        </div>
                                        <div class="qq">
                                            <el-image
                                                    :preview-src-list="['/static/my/img/footer/wechat.png', '/static/my/img/footer/qq.png']"
                                                    src="/static/my/img/footer/wechat.png" alt="我的微信"
                                                    scroll-container=".el-scrollbar__wrap" lazy></el-image>
                                            我的微信
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="feedback card">
                            <div class="title">
                                <h2>意见反馈</h2>
                            </div>
                            <div class="body">
                                <el-input
                                        id="feedback__email"
                                        placeholder="请输入用于接收反馈的邮箱"
                                        v-model="feedback.email">
                                </el-input>
                                <el-input
                                        id="feedback__content"
                                        placeholder="请输入你对网站的建议"
                                        type="textarea"
                                        :rows="6"
                                        resize="none"
                                        v-model="feedback.content">
                                </el-input>
                                <el-button type="primary" @click="feedback_add">确 定</el-button>
                            </div>
                        </div>


                        <div class="links card">
                            <el-dialog
                                    title="申请友链"
                                    :visible.sync="friends_links_dialog"
                                    width="30%">
                                <div class="dialog_content">
                                    <div>
                                        <label for="site_add__title">网站标题</label>
                                        <el-input
                                                id="site_add__title"
                                                placeholder="请输入你的网站标题"
                                                v-model="site.title">
                                        </el-input>
                                    </div>
                                    <div>
                                        <label for="site_add__href">网站链接</label>
                                        <el-input
                                                id="site_add__href"
                                                placeholder="请输入你的网站链接"
                                                v-model="site.href">
                                        </el-input>
                                    </div>
                                    <div>
                                        <label for="site_add__abstract">网站描述</label>
                                        <el-input
                                                id="site_add__abstract"
                                                placeholder="请输入你的网站描述"
                                                type="textarea"
                                                :rows="4"
                                                resize="none"
                                                v-model="site.abstract">
                                        </el-input>
                                    </div>
                                    <div>
                                        <label for="site_add__abstract">网站图片</label>
                                        <div class="flex">
                                            <el-input
                                                    id="site_add__abstract"
                                                    placeholder="请输入你的网站图标的在线链接"
                                                    class="icon_href"
                                                    v-model="site.icon_href">
                                            </el-input>
                                            <div class="icon_img">
                                                <img :src="site.icon_href" alt="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <span slot="footer" class="dialog-footer">
                            <el-button @click="friends_links_dialog = false">取 消</el-button>
                            <el-button type="primary" @click="friend_link_add">确 定</el-button>
                          </span>
                            </el-dialog>
                            <div class="title">
                                <h2>友情链接</h2>
                                <div>
                                    <a href="javascript:void (0);" @click="friends_links_dialog=true">申请友链</a>
                                </div>
                            </div>
                            <div class="body">
                                <ul>
                                    {% for link in link_list %}
                                        <li>
                                            <a href="{{ link.href }}" target="_blank">{{ link.title }}</a>
                                        </li>
                                    {% endfor %}


                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            {% endblock %}
        </main>
        <footer>
            <div class="left">
                <p class="thank">Thank For</p>
                <p class="info">
                    <img src="/static/my/img/footer/tencent.png" alt="">
                    <span>腾讯云服务器</span>
                    <img src="/static/my/img/footer/tencent.png" alt="">
                    <span>腾讯云SSL证书</span>
                    <img src="/static/my/img/footer/qiniu.png" alt="">
                    <span>七牛云存储</span>
                </p>
                <p class="version">
                    <span>version</span>
                    <span>4.0.1</span>
                </p>
                <p>建站日期：2021-12-29</p>
                <p class="beian">
                    <img src="/static/my/img/footer/badges.png" alt="">
                    <a href="https://beian.miit.gov.cn/">湘ICP备2021010654号-1</a>
                </p>
            </div>
            <div class="right">
                <div class="my_info">
                    <div class="qq" title="我的QQ">
                        <img class="show_img" src="/static/my/img/footer/qq.png" alt="">
                        <img class="img" src="/static/my/img/footer/qq_icon.svg" alt="">
                    </div>
                    <div class="wechat" title="我的微信">
                        <img class="show_img" src="/static/my/img/footer/wechat.png" alt="">
                        <img class="img" src="/static/my/img/footer/wexin_icon.svg" alt="">
                    </div>
                    <div title="我的哔哩哔哩">
                        <a href="https://space.bilibili.com/1539648321" target="_blank">
                            <img class="img" src="/static/my/img/footer/bilibili_icon.svg" alt="">
                        </a>

                    </div>
                    <div title="gitee">
                        <a href="https://gitee.com/fengfengzhidao" target="_blank">
                            <img class="img" src="/static/my/img/footer/gitee_icon.svg" alt="">
                        </a>
                    </div>
                    <div title="GitHub">
                        <a href="https://github.com/fengfengzhidao/" target="_blank">
                            <img class="img" src="/static/my/img/footer/github_icon.svg" alt="">
                        </a>

                    </div>
                </div>
                <p>
                    <span>联系邮箱：2974771769@qq.com</span>
                </p>
            </div>
        </footer>
    </el-scrollbar>
</div>
<script src="/static/vue/vue.js"></script>
<script src="/static/jquery/jquery.min.js"></script>
<!-- 引入组件库 -->
<script src="/static/elementui/index.js"></script>
<script src="/static/axios/axios.min.js"></script>
<script>
    axios.interceptors.request.use(request => {
        if (request.method !== 'get') {
            let csrftoken = document.querySelector('input[name="csrfmiddlewaretoken"]').value
            request.headers['X-CSRFToken'] = csrftoken
        }
        return request
    })
    axios.interceptors.response.use(response => {
        return response.data
    })

    /*
    function dynamic_navigation() {
        let a_list = document.querySelectorAll('#dynamic_nav>a')
        let path = location.pathname
        for (const a of a_list) {
            let a_href = a.getAttribute('href')
            if (a_href === path || a_href + '/' === path) {
                a.classList.add('active')
            }
        }
    }
    dynamic_navigation()

     */
    function getDisTop(element) {   //获取元素距离页面顶部的距离
        let realTop = element.offsetTop;
        let parent = element.offsetParent;
        while (parent !== null) {
            realTop += parent.offsetTop;
            parent = parent.offsetParent;
        }
        return realTop;
    }

    function setCookie(name, value) {
        let exp = new Date();
        exp.setTime(exp.getTime() + 2000);
        document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
    }

    //获取cookie
    function getCookie(name) {
        var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");

        if (arr = document.cookie.match(reg))

            return unescape(arr[2]);
        else
            return null;
    }

    var vue = new Vue({
        el: '#app',
        delimiters: ["[[", "]]"],
        data: {
            // 弹窗宽度
            max_dialog_width: '50%',
            min_dialog_width: '30%',
            theme: 'light',  // 默认的主题
            this_category: 'qianduan', // 当前所在的位置
            comment_content: '', // 评论内容

            isShowSlider: false,
            slide_list: [],
            slide_text: '显示悬浮目录',

            nav_drawer: false,

            search_key: '',

            news_list: [],  // 新闻列表

            news_init: [
                {
                    name: '微博',
                    id: 'KqndgxeLl9',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/s.weibo.com.png_50x50.png'
                },
                {
                    name: '知乎',
                    id: 'mproPpoq6O',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/zhihu.com.png_50x50.png'
                },
                {
                    name: '微信',
                    id: 'WnBe01o371',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/mp.weixin.qq.com.png_50x50.png'
                },
                {
                    name: '百度',
                    id: 'Jb0vmloB1G',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/baidu.com.png_50x50.png'
                },
                {
                    name: '36氪',
                    id: 'Q1Vd5Ko85R',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/36kr.com.png_50x50.png'
                },
                {
                    name: '哔哩哔哩',
                    id: '74KvxwokxM',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/bilibili.com.png_50x50.png'
                },
                {
                    name: '抖音',
                    id: 'DpQvNABoNE',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/iesdouyin.com.png_50x50.png'
                },
                {
                    name: '拼多多',
                    id: 'ARe1QZ2e7n',
                    url: 'https://file.ipadown.com/tophub/assets/images/media/p.pinduoduo.com.png_50x50.png'
                }
            ],
            news_active: '微博',
            news_active_url: 'https://file.ipadown.com/tophub/assets/images/media/s.weibo.com.png_50x50.png',

            mood_dialogVisible: false,

            mood_add: {
                name: '',
                avatar_id: null,
                content: '',
                drawing: '',
            },

            mood_show_drawing: [],

            mood_comment_dialogVisible: false,

            mood_add_comment: {
                name: '',
                content: '',
            },

            history_dialogVisible: false,
            history: {
                title: '',
                create_date: new Date(),
                content: '',
                drawing: '',
            },
            history_edit_add: false,  // 默认是添加, 编辑是nid
            history_show_drawing: [],
            history_pickerOptions: {
                disabledDate(time) {
                    return time.getTime() > Date.now();
                }
            },
            site_title: {
                title: ''
            },
            site_dialogVisible: false,
            site_add_edit_tag: false,
            site_tab_tag: '推荐',
            site_list: [],
            site_add_dialogVisible: false,
            site: {
                title: '',
                abstract: '',
                href: '',
                icon_href: '',
                tag: [],
            },
            site_add_edit: false,
            site_order: 'create_date',

            friends_links_dialog: false,

            feedback: {
                email: '',
                content: '',
            },

            article_pwd: '',
            edit_cover_dialog: false,
            edit_cover: {
                nid: '',  // 图片id
                aid: '',  // 文章id
            },

            project_dialog: false,
            project: {
                title: '',
                article: [],
            },
            project_add_edit: false,

        },
        created() {

            this.init_dialog_width()

            this.init_theme()

            let path = location.pathname
            if (path.indexOf('article') !== -1 || path.indexOf('about') !== -1) {
                this.init_slider()
            }
            if (path.indexOf('search') !== -1) {
                this.init_search_key()
            }

            if (path.indexOf('news') !== -1) {
                this.news_init_method(0)
            }
            if (path.indexOf('/') !== -1) {
                this.news_init_method(1)
            }
            if (path.indexOf('sites') !== -1) {
                this.init_site()
            }


            setTimeout(() => {
                this.get_sidebar()
                this.code_copy()
            }, 200)


        },
        mounted() {
            this.keyDown()
            let path = location.pathname
            if (path.indexOf('search') === -1) {
                setTimeout(() => {
                    this.init_scrollbar()
                }, 100)

            }
        },
        methods: {
            // 初始化弹窗大小
            init_dialog_width() {
                let w = $(document).width()
                if (w > 850) {

                } else if (w > 550) {
                    this.max_dialog_width = '70%'
                    this.min_dialog_width = '50%'
                } else if (w > 400) {
                    this.max_dialog_width = '90%'
                    this.min_dialog_width = '70%'
                } else {
                    this.max_dialog_width = '100%'
                    this.min_dialog_width = '90%'
                }
            },

            // 初始化主题
            init_theme() {
                // 读取存储的主题信息
                let theme = localStorage.getItem('theme')
                if (theme) {
                    this.theme = theme
                }
            },

            // 设置主题
            setTheme(themeName) {
                this.theme = themeName
                // 持久化存储
                localStorage.setItem('theme', themeName)
            },
            nav_open() {
                $('nav, .my_header,main,footer').addClass('open')
            },
            nav_close() {
                $('nav, .my_header,main,footer').removeClass('open')
            },
            // 图片加载失败
            img_error(e) {
                e.target.style.display = 'none'
            },
            // 监听方向键
            keyDown() {
                // 监听键盘
                let el_bar = document.querySelector('.el-scrollbar__wrap')
                document.onkeydown = (e) => {
                    //事件对象兼容
                    let e1 = e || event || window.event || arguments.callee.caller.arguments[0]
                    if (e1.target.classList.contains('viewer-open')) {
                        return
                    }

                    let top = el_bar.scrollTop  // 获取现在的位置
                    if (e1.code === 'ArrowDown') {  // 下
                        $(el_bar).animate({scrollTop: top + 20}, 0)
                    } else if (e1.code === 'ArrowUp') { // 上
                        $(el_bar).animate({scrollTop: top - 20}, 0)
                    }
                }
            },
            // 滚动条初始化
            init_scrollbar() {
                let bar = this.$refs.scrollbar.wrap
                let slider = document.querySelector('.slide_or_actions')
                let nav = document.querySelector('.nav_bg')
                let top1 = 0;
                let path = location.pathname
                let old_url = localStorage.getItem('current_url')
                let new_url = location.href
                if (path.indexOf('article') !== -1 || path.indexOf('about') !== -1) {
                    top1 = $(slider).offset().top - 80
                }
                if (old_url === new_url) {
                    // 刷新
                    let top = localStorage.getItem('current_top')
                    localStorage.setItem('current_top', '0')
                    let el_bar = document.querySelector('.el-scrollbar__wrap')
                    $(el_bar).animate({scrollTop: top}, 0)
                }

                bar.onscroll = () => {
                    let top = bar.scrollTop

                    if (top >= 200) {
                        nav.classList.add('show')
                    } else {
                        nav.classList.remove('show')
                    }
                    if (slider) {
                        if (top >= top1) {
                            slider.classList.add('fixed')
                        } else {
                            slider.classList.remove('fixed')
                        }
                    }
                }
            },
            // 选择分类
            switch_article_category(categoryName) {
                this.this_category = categoryName
            },

            // 发布评论
            add_comment(nid) {
                let content = AnalyticMarkDown(this.comment_content)
                axios.post(`/api/article/comment/${nid}/`, {content}).then(res => {
                    if (res.code) {
                        if (res.self) {
                            this.$refs[`comment_${res.self}`].focus();
                        }
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    setTimeout(() => {
                        location.reload()
                    }, 500)
                })
            },

            // 将被评论人的用户名写到placeholder
            set_sub_placeholder(div, username, cid) {
                $(div).find('textarea').attr('placeholder', `@${username}`)
                $(div).find('textarea')[0].focus()
                $(div).find('textarea').attr('cid', cid)

            },

            // 展示子评论列表
            show_sub_comment_list(e, username, cid) {
                let div = $(e.target).parent().parent().next()
                $(div).slideToggle()
                // div
                this.set_sub_placeholder(div, username, cid)


            },

            // 子评论回复显示
            sub_comment_set_placeholder(e, username, cid) {
                let div = $(e.target).parents('.sub_comment_list')
                this.set_sub_placeholder(div, username, cid)
            },

            // 发布子评论
            add_sub_comment(e, nid) {
                // nid 文章id
                // cid  评论id

                axios.post(`/api/article/comment/${nid}/`, {
                    content: $(e.target).prev().val(),
                    pid: $(e.target).prev().attr('cid')
                }).then(res => {
                    if (res.code) {
                        if (res.self) {
                            this.$refs[`sub_comment_${res.self}`].focus();
                        }
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    setTimeout(() => {
                        location.reload()
                    }, 500)
                })
            },

            // 删除子评论
            delete_sub_comment(nid, aid, root_comment_id) {
                this.$confirm('此操作将永久删除该评论, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    axios.delete(`/api/article/comment/${nid}/`, {
                        data: {
                            aid,
                            pid: root_comment_id
                        }
                    }).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        this.$message.success(res.msg)
                        setTimeout(() => {
                            location.reload()
                        }, 500)
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '取消删除'
                    });
                });

            },

            // 评论点赞
            comment_digg(e, nid) {
                axios.post(`/api/comment/digg/${nid}/`).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    e.target.innerHTML = `点赞（${res.data}）`
                    this.$message.success(res.msg)
                })
            },

            // 文章点赞
            article_digg(e, nid) {
                let dom = e.target
                dom.classList.add('show')
                axios.post(`/api/article/digg/${nid}/`).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    $(dom).next().text(res.data)
                    this.$message.success(res.msg)
                })

                let timer = null

                timer = setTimeout(() => {
                    clearTimeout(timer)
                    dom.classList.remove('show')
                }, 1000)
            },

            // 文章收藏
            article_collects(e, nid) {
                let dom = e.target
                axios.post(`/api/article/collects/${nid}/`).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    $(dom).next().text(res.data)
                    if (res.isCollects) {
                        dom.classList.add('show')
                        return
                    }
                    dom.classList.remove('show')
                })
            },
            // 回到顶部
            go_to_top() {
                let bar = this.$refs.scrollbar.wrap
                $(bar).animate({
                    scrollTop: 0
                }, 500)
            },

            init_slider() {
                let flag = localStorage.getItem('isShowSlider')
                setTimeout(() => {
                    let box = document.querySelectorAll('.el-scrollbar__view')[1]
                    let height = box.offsetHeight
                    if (height > 500) {
                        height = 500
                    } else if (height === 0) {
                        height = 200
                    }
                    document.getElementById('el_scrollbar').style.height = height + 'px'
                }, 300)
                if (flag) {
                    flag = eval(flag)
                    this.isShowSlider = flag
                    this.$nextTick(() => {
                        this.sliderChange(flag)
                    })
                }
            },
            // 悬浮目录是否显示
            sliderChange(val) {
                /*
                let dom = this.$refs.slider

                localStorage.setItem('isShowSlider', val)
                if (val) {
                    dom.classList.add('show')
                    this.slide_text = '关闭悬浮目录'
                    return
                }
                dom.classList.remove('show')
                this.slide_text = '显示悬浮目录'

                 */
                let dom = this.$refs.slider
                localStorage.setItem('isShowSlider', val)
                if (val) {
                    dom.classList.add('show')
                    this.side_text = '关闭悬浮目录'
                    $(dom).find('.body').slideDown()
                    return
                }
                this.side_text = '开启悬浮目录'
                $(dom).find('.body').slideUp()
                dom.classList.remove('show')

            },

            // 悬浮目录
            get_sidebar() {
                let content = $('#article_content')
                let h_list = content.children('h1,h2,h3,h4')
                let lis = []
                for (let i = 0; i < h_list.length; i++) {
                    let c = h_list[i].innerText
                    let tagName = h_list[i].tagName
                    let tagId = h_list[i].id
                    let ele = {
                        tagName,
                        c,
                        pos: '#' + tagId
                    }
                    lis.push(ele)
                }

                lis.push({
                    tagName: 'H1',
                    c: '去评论吧！',
                    pos: '.comment_submit'
                })
                this.slide_list = lis
            },
            //
            go_side_bar(selector, e) {
                $('.slider_bar .body p').css('color', '')
                let bar = this.$refs.scrollbar.wrap

                e.target.style.color = '#ff9800'
                let top = getDisTop($(selector)[0])
                $(bar).animate({scrollTop: top - 80}, 600)
            },

            // 代码一键复制
            code_copy() {
                $('pre').each(function () {
                    let copy = $('<i title="copy" class="el-icon-document-copy code-copy"></i>')
                    $(this).append(copy)
                })

                $('pre i.code-copy').click(e => {

                    let text_list = $(e.target).prev().find('code')
                    let text = ''
                    text_list.each(function () {
                        text += $(this).text() + '\n'
                    })
                    let element = $('<textarea>' + text + '</textarea>')
                    $('body').append(element)
                    element[0].select()
                    document.execCommand('Copy')
                    element.remove()

                    // 复制成功的提示信息
                    this.$message.success('复制成功！')

                })

            },


            // 点击搜索
            search(path = '/search/', target = '_blank') {
                let box = document.querySelector('.search')

                if (!box.classList.contains('show_search')) {
                    box.classList.add('show_search')
                    return
                }
                if (!this.search_key) {
                    box.classList.remove('show_search')
                    return;
                }
                // 打开标签页
                window.open(path + '?key=' + this.search_key, name = target)
            },
            // 初始化搜索词
            init_search_key() {
                let dom = document.querySelector('.search_key_input')
                let key = dom.getAttribute('data')
                this.search_key = key
            },

            // 获取热搜数据
            get_new_data(id, name, url, flag, size) {
                if (name === this.news_active && !flag) {
                    return
                }
                this.news_active = name
                this.news_active_url = url

                let data = {
                    id,
                }
                if (size) {
                    data.size = size
                }

                axios.post('https://api.codelife.cc/api/top/list', data, {
                    headers: {
                        version: '1.2.21',
                    }
                }).then(res => {
                    this.news_list = res.data
                })
            },

            news_init_method(size) {
                this.get_new_data('KqndgxeLl9', '微博', 'https://file.ipadown.com/tophub/assets/images/media/s.weibo.com.png_50x50.png', true, size)
            },

            mood_show_comment_list(e) {
                let div = $(e.target).parent().parent().next()
                div.slideToggle()
            },
            // 发布心情
            mood_add_method() {
                axios.post('/api/moods/', this.mood_add).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        this.$refs[`mood_add__${res.self}`].focus()
                        return
                    }
                    this.$message.success(res.msg)
                    setTimeout(() => {
                        location.reload()
                    }, 1000)

                })
            },
            // 删除心情
            mood_delete(nid, e) {
                this.$confirm('此操作将永久删除该心情, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    axios.delete(`/api/moods/${nid}/`).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        this.$message.success(res.msg)
                        setTimeout(() => {
                            $(e.target).parents('.mood').remove()
                        }, 500)
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                });
            },

            // 打开回复心情的对话框
            mood_comment_dialogVisible_show(nid) {
                this.mood_comment_dialogVisible = true
                this.mood_comment_add_method.nid = nid

            },

            // 心情评论
            mood_comment_add_method() {
                let nid = this.mood_comment_add_method.nid

                axios.post(`/api/mood_comments/${nid}/`, this.mood_add_comment).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        this.$refs[`mood_comment_add__${res.self}`].focus()
                        return
                    }
                    this.$message.success(res.msg)
                    setTimeout(() => {
                        location.reload()
                    }, 1000)
                })
            },


            // 心情评论删除
            mood_sub_comment_delete(nid, mood_id, e) {
                this.$confirm('此操作将永久删除该评论, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    // nid是评论id，mood_id是心情id
                    axios.delete(`/api/mood_comments/${nid}/`, {
                        data: {
                            mood_id,
                        }
                    }).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        this.$message.success(res.msg)
                        setTimeout(() => {
                            $(e.target).parents('.mood').find('.mood_comment_num').text(`评论（${res.data}）`)
                            $(e.target).parents('li').remove()
                        }, 300)
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                });
            },

            // 心情点赞和心情评论点赞
            mood_digg(path, nid, e) {
                axios.put(`/api/${path}/${nid}/`).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    $(e.target).text(`点赞（${res.data}）`)
                })
            },

            uploadImgFromPaste(file) {
                axios.post('/api/paste_upload/', {image: file}).then(res => {
                    this.history.drawing += res.url + '\n'
                })
            },

            history_add_edit_method(nid) {
                axios.post('/api/history/' + nid, this.history).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    this.history_dialogVisible = false
                    location.reload()
                })
            },
            history_add_method(nid) {
                if (!nid) {
                    // 添加事件
                    this.history_add_edit_method('')
                    return
                }
                // 编辑事件
                this.history_add_edit_method(nid + '/')
            },

            paste_upload(e) {
                let clipboardData = (e.clipboardData || e.originalEvent.clipboardData);
                let items = clipboardData.items, len = items.length, blob = null;


                //在items里找粘贴的image,据上面分析,需要循环
                for (let i = 0; i < len; i++) {
                    if (items[i].type.indexOf("image") !== -1) {
                        //getAsFile() 此方法只是living standard firefox ie11 并不支持
                        blob = items[i].getAsFile();
                    }
                }
                if (blob !== null) {
                    // 读取图片文件
                    let reader = new FileReader();
                    reader.onload = (event) => {
                        // event.target.result 即为图片的Base64编码字符串
                        let base64_str = event.target.result
                        //可以在这里写上传逻辑 直接将base64编码的字符串上传（可以尝试传入blob对象，看看后台程序能否解析）
                        this.uploadImgFromPaste(base64_str);
                    }
                    reader.readAsDataURL(blob);
                    //阻止默认行为即不让剪贴板内容在div中显示出来
                    // e.preventDefault();
                }

            },

            history_edit_show(e, nid, title, create_date) {
                this.history.title = title
                this.history.create_date = create_date
                let div = e.target
                this.history_edit_add = nid
                this.history.content = div.getAttribute('content')
                this.history.drawing = div.getAttribute('drawing')
                this.history_dialogVisible = true
            },

            history_remove(nid, e) {
                this.$confirm('此操作将永久删除该事件, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    // nid是评论id，mood_id是心情id
                    axios.delete(`/api/history/${nid}/`).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        $(e.target).parents('.timeline-item').remove()
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                });
            },

            history_handleClose(done) {
                this.$confirm('关闭之后，修改的数据失效，确认关闭？', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                })
                    .then(() => {
                        this.history.title = ''
                        this.history.create_date = new Date()
                        this.history_edit_add = false
                        this.history.content = ''
                        this.history.drawing = ''
                        done();
                    })
                    .catch(() => {
                    });
            },


            site_add_edit_tag_method(nid) {
                axios.post('/api/site_tag/' + nid, this.site_title).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    location.reload()
                })
            },

            site_add_tag(nid) {
                if (!nid) {
                    // 添加事件
                    this.site_add_edit_tag_method('')
                    return
                }
                // 编辑事件
                this.site_add_edit_tag_method(nid + '/')
            },

            site_tag_edit_show(nid, title) {
                this.site_add_edit_tag = nid
                this.site_title.title = title
                this.site_dialogVisible = true
            },
            site_tag_handleClose(done) {
                this.site_add_edit_tag = false
                this.site_title.title = ''
                done()
            },
            site_tag_remove(e, nid) {
                this.$confirm('此操作将永久删除该标签, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    // nid是评论id，mood_id是心情id
                    axios.delete(`/api/site_tag/${nid}/`).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        $(e.target).remove()
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                });
            },

            site_tag_tab_show(title) {
                this.site_tab_tag = title

                this.site_get_list(title, this.site_order)
            },

            site_get_list(title, order) {
                axios.get('/api/sites/', {
                    params: {
                        title,
                        order,
                    }
                }).then(res => {
                    this.site_list = res

                })
            },
            init_site() {
                this.site_get_list(this.site_tab_tag, this.site_order)
            },

            site_add(nid) {
                if (!nid) {
                    axios.post('/api/sites/', this.site).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            $(`#site_add__${res.self}`)[0].focus()
                            return
                        }
                        this.$message.success(res.msg)
                        this.site_add_dialogVisible = false
                        this.init_site()
                    })
                } else {
                    axios.put(`/api/sites/${nid}/`, this.site).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            $(`#site_add__${res.self}`)[0].focus()
                            return
                        }
                        this.$message.success(res.msg)
                        this.site_add_dialogVisible = false
                        this.init_site()
                    })
                }

                this.site = {
                    title: '',
                    abstract: '',
                    href: '',
                    icon_href: '',
                    tag: [],
                }

            },

            site_edit_show(item) {
                let tag = []
                for (const itemElement of item.tags) {
                    tag.push(itemElement.nid)
                }
                this.site = {
                    title: item.title,
                    abstract: item.abstract,
                    href: item.href,
                    icon_href: item.icon_href,
                    tag,
                }
                this.site_add_edit = item.nid
                this.site_add_dialogVisible = true
            },

            site_edit_close(done) {
                done()
                this.site_add_edit = false
                this.site = {
                    title: '',
                    abstract: '',
                    href: '',
                    icon_href: '',
                    tag: [],
                }

            },
            site_remove(e, nid) {
                this.$confirm('此操作将永久删除该网站, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    // nid是评论id，mood_id是心情id
                    axios.delete(`/api/sites/${nid}/`).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        $(e.target).parent().parent().remove()
                    })
                }).catch(() => {
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                });
            },
            site_order_method(order) {
                this.site_order = order
                this.site_get_list(this.site_tab_tag, this.site_order)
            },

            site_digg(e, item) {
                axios.post(`/api/site_digg/${item.nid}/`).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    item.digg_count += 1

                    $(e.target).parent().addClass('show')

                    setTimeout(() => {
                        $(e.target).parent().removeClass('show')
                    }, 2000)
                })
            },
            site_coll(e, item) {
                axios.post(`/api/site_coll/${item.nid}/`).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        return
                    }
                    this.$message.success(res.msg)
                    if (res.data === 1) {
                        $(e.target).parent().addClass('show')
                    } else {
                        $(e.target).parent().removeClass('show')
                    }
                    item.collects_count += res.data

                })
            },
            friend_link_add() {
                axios.post('/api/friends_links/', this.site).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        $(`#site_add__${res.self}`)[0].focus()
                        return
                    }
                    this.$message.success(res.msg)
                    this.friends_links_dialog = false
                })
            },

            feedback_add() {
                axios.post('/api/feedback/', this.feedback).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        $(`#feedback__${res.self}`)[0].focus()
                        return
                    }
                    this.$message.success(res.msg)
                    this.feedback.content = ''
                })
            },

            article_pwd_show(nid) {
                axios.post(`/api/article_pwd/${nid}/`, {pwd: this.article_pwd}).then(res => {
                    if (res.code) {
                        this.$message.error(res.msg)
                        document.getElementById('article_pwd').focus()
                        return
                    }
                    this.$message.success(res.msg)
                    location.reload()

                })
            },
            show_edit_cover(aid, nid) {
                this.edit_cover.nid = nid
                this.edit_cover.aid = aid
                this.edit_cover_dialog = true
            },

            edit_cover_method(aid) {
                // aid 文章的id
                let nid = this.edit_cover.nid  // 新的图片id
                axios.post(`/api/article/cover/${aid}/`, {nid}).then(res => {
                    location.reload()
                })
            },

            project_edit_show(lis, title, nid) {
                this.project.title = title
                this.project_add_edit = nid
                this.project.article = eval(lis)
                this.project_dialog = true
            },
            project_handleClose(done) {
                done()
                this.project_dialog = false
                this.project.title = ''
                this.project_add_edit = false
                this.project.article = []

            },
            project_add(nid) {
                if (nid) {
                    axios.put(`/api/projects/${nid}/`, this.project).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        this.$message.success(res.msg)
                        setTimeout(() => {
                            location.reload()
                        }, 1000)

                    })
                } else {
                    axios.post('/api/projects/', this.project).then(res => {
                        if (res.code) {
                            this.$message.error(res.msg)
                            return
                        }
                        this.$message.success(res.msg)
                        setTimeout(() => {
                            location.reload()
                        }, 1000)
                    })
                }
                this.project_add_edit = false

            }

        },
        watch: {
            'mood_add.drawing'(n, o) {
                this.mood_show_drawing = n.split('\n')
            },
            'history.drawing'(n, o) {
                this.history_show_drawing = n.split('\n')
            },

        }
    })
    let w = true;  // 点击a标签的跳转就回到顶部
    $('a').click(e => {
        w = false
    })
    window.onbeforeunload = e => {
        // 将滚动条的位置和当前url写入
        if (w) {
            let el_bar = document.querySelector('.el-scrollbar__wrap')
            let url = location.href
            localStorage.setItem('current_top', el_bar.scrollTop)  // 离开前 距离页面顶部的高度
            localStorage.setItem('current_url', url)  // 离开前的的网站路径
        }


    };


</script>
{% block js %}
    <script>
        // 获取需要轮播的div
        let menu_img = document.querySelectorAll('.dynamic_shuffl')

        let banner = document.getElementById('banner_box')
        let banner_time = Number(banner.getAttribute('banner_time'))
        // 获取它的长度
        let menu_length = menu_img.length
        // 初始位置
        let index = 0
        let timer = null;
        clearInterval(timer)
        timer = setInterval(() => {
            //
            index++
            // 到头了
            if (index === menu_length) {
                index = 0
            }
            // 样式复原操作
            for (let i of menu_img) {
                i.style.opacity = 0
            }
            menu_img[index].style.opacity = 1
            if (!banner_time) {
                clearInterval(timer)
            }

        }, banner_time * 1000)


        let banner_slogan = document.getElementById('banner_slogan')
        let slogan_list = eval(banner_slogan.getAttribute('lis'))
        let slogan_time = Number(banner_slogan.getAttribute('slogan_time'))

        let slogan_index = 0;
        let slogan_timer = null
        slogan_timer = setInterval(() => {
            slogan_index++
            if (slogan_index === slogan_list.length) {
                slogan_index = 0
            }
            if (!slogan_time) {
                clearInterval(slogan_timer)
            } else {
                banner_slogan.innerText = slogan_list[slogan_index]
            }

        }, slogan_time * 1000)


    </script>
    <script src="/static/my/js/get_24_house.js"></script>
    <script>
        let today = new Date();
        year = today.getFullYear()
        month = today.getMonth() + 1; //获取当前月份(0-11,0代表1月)
        day = today.getDate(); //获取当前日(1-31)

        let hourse_img = {
            '立春': ['0.png', '立春', 'translate(0px, -223px)'],
            '雨水': ['1.png', '雨水', 'translate(0px, -207px)'],
            '惊蛰': ['2.png', '惊蛰', 'translate(0px, -223px)'],
            '春分': ['3.png', '春分', 'translate(0px, -190px)'],
            '清明': ['4.png', '清明', 'translate(0px, -279px)'],
            '谷雨': ['5.png', '谷雨', 'translate(0px, -239px)'],
            '立夏': ['6.png', '立夏', 'translate(0px, -210px)'],
            '小满': ['7.png', '小满', 'translate(0px, -226px)'],
            '芒种': ['8.png', '芒种', 'translate(0px, -199px)'],
            '夏至': ['9.png', '夏至', 'translate(0px, -120px)'],
            '小暑': ['10.png', '小暑', 'translate(0px, -232px)'],
            '大暑': ['11.png', '大暑', 'translate(0px, -117px)'],
            '立秋': ['12.png', '立秋', 'translate(0px, -151px)'],
            '处暑': ['13.png', '处暑', 'translate(0px, -161px)'],
            '白露': ['14.png', '白露', 'translate(0px, -57px)'],
            '秋分': ['15.png', '秋分', 'translate(0px, -129px)'],
            '寒露': ['16.png', '寒露', 'translate(0px, -185px)'],
            '霜降': ['17.png', '霜降', 'translate(0px, -181px)'],
            '立冬': ['18.png', '立冬', 'translate(0px, -181px)'],
            '小雪': ['19.png', '小雪', 'translate(0px, -181px)'],
            '大雪': ['20.png', '大雪', 'translate(0px, -82px)'],
            '冬至': ['21.png', '冬至', 'translate(0px, -242px)'],
            '小寒': ['22.png', '小寒', 'translate(0px, -48px)'],
            '大寒': ['23.png', '大寒', 'translate(0px, -114px)'],
        }

        now = getjq(year, month, day)
        let load = hourse_img[now]
        if (load) {
            $('#jieqiset').attr('src', `/static/my/img/24_hourse/${load[0]}`).css('transform', `${load[2]}`).attr('title', load[1])
        }
    </script>
{% endblock %}
{% block article_js %}

{% endblock %}
</body>
</html>